<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SKIP THE COURIER</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Inter"
      rel="stylesheet"
    />

    <style>
      .navbar {
        overflow: hidden;
        background-color: #333;
      }

      #navima {
        float: left;
        display: block;
        color: #f2f2f2;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
        font-size: 17px;
      }

      .navbar a:hover {
        background: #ddd;
        color: black;
      }

      .navbar a.active {
        background-color: #4caf50;
        color: white;
      }
    </style>
    <link rel="icon" href="navbar.png" type="image/x-icon" />
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a id="navima" class="navbar-brand" href="/home.html"
        ><img src="navbar.png" alt="logo" style="width: 50px; height: 50px"
      /></a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto" id="navList">
          <li class="nav-item">
            <a class="nav-link" href="Requestdelivery.html">Request Delivery</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="proposalQuotation.html"
              >Shipping quotes</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="Trackorderpages.html">Track Package</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="Services.html">Services</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="Support.html">Support</a>
          </li>
        </ul>       
         <ul class="navbar-nav mr-auto" id="navListDeliverer">
          <li class="nav-item">
            <a class="nav-link" href="SelectPackages.html">Select Packages</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="MyPackages.html"
              >My Packages</a
            >
          </li>
        </ul>
        <button
          class="nav-link my-2 my-sm-0"
          style="text-decoration: black"
          id="buttonHref"
          ><i class="bi bi-person-circle" id="loginButton">Log In or Sign Up</i>
      </buton>
      </div>
    </nav>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

    <script src="js/bootstrap.min.js"></script>
  </body>
  <script>
      function obtainCookie(name) {
        // Add the = sign
        name = name + "=";

        // Get the decoded cookie
        var decodedCookie = decodeURIComponent(document.cookie);

        // Get all cookies, split on ; sign
        var cookies = decodedCookie.split(";");

        // Loop over the cookies
        for (var i = 0; i < cookies.length; i++) {
          // Define the single cookie, and remove whitespace
          var cookie = cookies[i].trim();

          // If this cookie has the name of what we are searching
          if (cookie.indexOf(name) == 0) {
            // Return everything after the cookies name
            return cookie.substring(name.length, cookie.length);
          }
        }
      }
    // check if logged in by checking if token exists
    if (obtainCookie("tokenId") != null) {
      // if logged in, change login button to sign out button
      document.getElementById("loginButton").className =
        "bi bi-box-arrow-right";
      document.getElementById("loginButton").innerHTML = "Sign Out";

      document.getElementById("buttonHref").addEventListener("click", () => {
        window.location.href = "home.html";
        document.cookie = "tokenId=; Max-Age=-99999999;";
        document.cookie = "accountType=; Max-Age=-99999999;";
      });

      // check if user is a deliverer
      const accountType = obtainCookie("accountType");
      if (accountType == "deliverer") {
        // if deliverer, make deliverer navlist items visible
        document.getElementById("navListDeliverer").style.visibility =
          "visible";
          document.getElementById("navList").style.display =
          "none";
      } 
      
      else if (accountType == "client"){
        // if not deliverer, make deliverer navlist items invisible
        document.getElementById("navListDeliverer").style.display =
          "none";
          document.getElementById("navList").style.visibility =
          "visible";
      }
      
    }else{
      // Make navlist items invisible
      document.getElementById("navList").style.visibility = "hidden";
      document.getElementById("navListDeliverer").style.visibility = "hidden";
      document.getElementById("buttonHref").addEventListener("click", () => {
        window.location.href = "Signup.html";
      });
    }
  </script>
</html>
